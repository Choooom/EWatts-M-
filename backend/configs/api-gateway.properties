server.port=8080

# Eureka Config
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

# IMPORTANT: Use reactive gateway (not webmvc) for WebSocket support
# Remove the .server.webmvc part and use standard gateway routes

# Auth Service Route
spring.cloud.gateway.routes[0].id=auth2
spring.cloud.gateway.routes[0].uri=http://localhost:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/**

# Electrical Readings - WebSocket Route (MUST come before regular HTTP route)
spring.cloud.gateway.routes[1].id=electrical_readings_websocket
spring.cloud.gateway.routes[1].uri=ws://localhost:8083
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/iot/ws/**
# These filters preserve WebSocket headers
spring.cloud.gateway.routes[1].filters[0]=PreserveHostHeader

# Electrical Readings - HTTP Route
spring.cloud.gateway.routes[2].id=electrical_readings
spring.cloud.gateway.routes[2].uri=http://localhost:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/iot/**

# Weather Prediction Route
spring.cloud.gateway.routes[3].id=weather-prediction
spring.cloud.gateway.routes[3].uri=lb://weather-prediction
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/weather/**

# CORS Configuration is now handled in CorsConfig.java (programmatic approach)