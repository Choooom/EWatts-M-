spring.application.name=electrical_readings

eureka.client.service-url.defaultZone=http://localhost:8761/eureka/


# Server Configuration
server.port=8082
server.servlet.context-path=/
server.error.include-message=always
server.error.include-binding-errors=always

# ===============================
# DATABASE CONFIGURATION (PostgreSQL)
# ===============================
spring.datasource.url=jdbc:postgresql://localhost:5432/electrical_readings_db
spring.datasource.username=postgres
spring.datasource.password=974602
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Settings
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.open-in-view=false

# ===============================
# REDIS CONFIGURATION
# ===============================
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.timeout=2000ms
spring.redis.lettuce.pool.max-active=8
spring.redis.lettuce.pool.max-wait=-1ms
spring.redis.lettuce.pool.max-idle=8
spring.redis.lettuce.pool.min-idle=0

# ===============================
# INFLUXDB CONFIGURATION
# ===============================
influxdb.url=http://localhost:8086
influxdb.token=your-influxdb-token-here
influxdb.org=your-org
influxdb.bucket=electrical-readings

# InfluxDB Connection Settings
influxdb.connect-timeout=10s
influxdb.read-timeout=30s
influxdb.write-timeout=10s

# ===============================
# MQTT CONFIGURATION
# ===============================
mqtt.broker-url=tcp://localhost:1883
mqtt.client-id=electrical-service
mqtt.username=mqtt_user
mqtt.password=mqtt_password
mqtt.topic=device/readings/+
mqtt.qos=1
mqtt.retained=false
mqtt.clean-session=true
mqtt.connection-timeout=30
mqtt.keep-alive-interval=60

# ===============================
# WEBSOCKET CONFIGURATION
# ===============================
websocket.allowed-origins=http://localhost:3000,http://localhost:8080,*
websocket.endpoint=/ws/readings
websocket.message-size-limit=8192
websocket.send-time-limit=10000
websocket.send-buffer-size-limit=512000

# ===============================
# SECURITY & JWT CONFIGURATION
# ===============================
app.jwtSecret=3v2K8mNf9Dq6T1pYhX4jZ6sQ2rL0fW9o
app.jwtExpirationMs=86400000

# Auth Service Integration
auth-service.base-url=http://localhost:8080
auth-service.validate-endpoint=/api/users/{userId}/validate
auth-service.timeout=5000

# CORS Configuration
app.cors.allowed-origins=http://localhost:3000,http://localhost:8080
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.max-age=3600

# ===============================
# LOGGING CONFIGURATION
# ===============================
logging.level.com.yourcompany.electricalservice=INFO
logging.level.org.springframework.web.socket=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log file configuration
logging.file.name=logs/electrical-service.log
logging.file.max-size=10MB
logging.file.max-history=10
logging.pattern.file=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ===============================
# ACTUATOR CONFIGURATION (Health & Monitoring)
# ===============================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.endpoints.web.base-path=/actuator
management.server.port=9090

# Health check configurations
management.health.redis.enabled=true
management.health.influxdb.enabled=true
management.health.mqtt.enabled=true

# Metrics configuration
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# ===============================
# SCHEDULING CONFIGURATION
# ===============================
spring.task.scheduling.pool.size=5
spring.task.execution.pool.core-size=8
spring.task.execution.pool.max-size=16
spring.task.execution.pool.queue-capacity=100

# Custom scheduling intervals (in milliseconds)
app.cleanup.readings-retention-days=30
app.cleanup.schedule-interval=3600000
app.device-status.check-interval=60000
app.aggregation.schedule-interval=300000

# ===============================
# HTTP CLIENT CONFIGURATION
# ===============================
spring.http.client.connect-timeout=5000
spring.http.client.read-timeout=10000

# RestTemplate configuration for auth service calls
http.client.auth-service.connect-timeout=3000
http.client.auth-service.read-timeout=5000
http.client.auth-service.max-connections=20

# ===============================
# VALIDATION CONFIGURATION
# ===============================
# Device reading validation thresholds
app.validation.voltage.min=0
app.validation.voltage.max=300
app.validation.current.min=0
app.validation.current.max=100
app.validation.power.min=0
app.validation.power.max=30000
app.validation.energy.max=999999

# ===============================
# CACHE CONFIGURATION
# ===============================
spring.cache.type=redis
spring.cache.redis.time-to-live=600000
spring.cache.redis.cache-null-values=false

# Custom cache configurations
app.cache.device-info.ttl=300
app.cache.user-devices.ttl=600
app.cache.latest-readings.ttl=30

# ===============================
# EMAIL NOTIFICATION (Optional)
# ===============================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=romilleilaida420@gmail.com
spring.mail.password=tceduoenhhuiqzbg
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Alert thresholds
app.alerts.power.threshold=5000
app.alerts.voltage.low-threshold=200
app.alerts.voltage.high-threshold=250
app.alerts.enabled=true

# ===============================
# DATA EXPORT CONFIGURATION
# ===============================
app.export.max-records=10000
app.export.formats=csv,json,excel
app.export.temp-directory=/tmp/electrical-exports

# ===============================
# DEVICE MANAGEMENT
# ===============================
app.devices.auto-registration=false
app.devices.max-per-user=10
app.devices.default-calibration.voltage=83.3
app.devices.default-calibration.current=0.50
app.devices.heartbeat-timeout=300000

# ===============================
# RATE LIMITING
# ===============================
app.rate-limit.readings.per-device=120
app.rate-limit.readings.window=60000
app.rate-limit.api.per-user=1000
app.rate-limit.api.window=60000

# ===============================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ===============================

# Test Profile
app.validation.enabled=false