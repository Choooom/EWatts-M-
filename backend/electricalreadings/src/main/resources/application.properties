spring.application.name=Electrical Readings

server.port=8083

# ===================================================================
# DATABASE CONFIGURATION
# ===================================================================
spring.datasource.url=jdbc:postgresql://localhost:5432/electrical_readings_db
spring.datasource.username=postgres
spring.datasource.password=974602
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# ===================================================================
# MQTT CONFIGURATION (Local)
# ===================================================================
# spring.mqtt.broker-url=tcp://localhost:1883
# spring.mqtt.client-id=electrical-readings-service
# spring.mqtt.username=mqtt_service
# spring.mqtt.password=Amen1034
# spring.mqtt.topics.readings=electrical/readings/+
# spring.mqtt.topics.control=electrical/control/+

# ===================================================================
# MQTT CONFIGURATION - SHIFTR.IO
# ===================================================================
# Shiftr.io broker URL
  spring.mqtt.broker-url=tcp://public.cloud.shiftr.io:1883

# For secure connection (recommended for production):
# spring.mqtt.broker-url=ssl://broker.shiftr.io:8883

# Your Shiftr.io credentials
spring.mqtt.client-id=electrical-readings-service
spring.mqtt.username=e-meter
spring.mqtt.password=6LwhLlhjjjlYPGgY

# MQTT Topics
spring.mqtt.topics.readings=electrical/readings/+
spring.mqtt.topics.control=electrical/control/+

# Connection settings
spring.mqtt.connection-timeout=30
spring.mqtt.keep-alive-interval=60
spring.mqtt.clean-session=true
spring.mqtt.automatic-reconnect=true

# ===================================================================
# JWT CONFIGURATION (MUST MATCH YOUR AUTH SERVICE)
# ===================================================================
jwt.secret=pHWIc0kd2m8SKTmPmcZYhgk2BmT6BnWVs6INvWbz/v7yMz2nQ/Ywd7m1qV9pLUVcjF6h79LMIDgeQMI4QBdlTg==
jwt.expiration=86400000

# ===================================================================
# EUREKA CLIENT CONFIGURATION
# ===================================================================
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.client.fetch-registry=true
eureka.client.register-with-eureka=true
eureka.instance.prefer-ip-address=true
eureka.instance.instance-id=${spring.application.name}:${server.port}

# ===================================================================
# AUTH SERVICE CONFIGURATION
# ===================================================================
auth-service.url=http://localhost:8081

# ===================================================================
# WEBSOCKET CONFIGURATION
# ===================================================================
websocket.allowed-origins=*

# ===================================================================
# DATA AGGREGATION SCHEDULER
# ===================================================================
aggregation.enabled=true
# Hourly aggregation - Every hour at :00 minutes
aggregation.hourly-cron=0 0 * * * *
# Daily aggregation - Every day at midnight
aggregation.daily-cron=0 0 0 * * *
# Monthly aggregation - First day of month at midnight
aggregation.monthly-cron=0 0 0 1 * *

# ===================================================================
# LOGGING
# ===================================================================
logging.level.root=INFO
logging.level.com.ewatts.electricalreadings=DEBUG
logging.level.org.springframework.integration.mqtt=DEBUG
logging.level.org.springframework.security=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Optional: Log to file
# logging.file.name=logs/electrical-readings-service.log
# logging.file.max-size=10MB
# logging.file.max-history=30

# ===================================================================
# ACTUATOR (Health Check & Monitoring)
# ===================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# ===================================================================
# SPRING BOOT ADMIN (Optional - if you're using it)
# ===================================================================
# spring.boot.admin.client.url=http://localhost:8090

# ===================================================================
# CORS CONFIGURATION (Additional if needed)
# ===================================================================
# Already handled in SecurityConfig.java, but you can add more here if needed

# ===================================================================
# CONNECTION POOL (HikariCP - Default)
# ===================================================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ===================================================================
# JACKSON (JSON Serialization)
# ===================================================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC
spring.jackson.default-property-inclusion=non_null

# ===================================================================
# MULTIPART FILE UPLOAD (if needed for future features)
# ===================================================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB